<!DOCTYPE html>
<html lang="en">
<!-- BEGIN HEAD -->

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta content="width=device-width, initial-scale=1" name="viewport" />
	<meta name="description" content="Responsive Admin Template" />
	<meta name="author" content="SmartUniversity" />
	<title>Data  | Mitra MyBiiz</title>
	<!-- icons -->
	<link href="assets/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
	<link href="assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
	<!--bootstrap -->
	<link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<!-- Material Design Lite CSS -->
	<link rel="stylesheet" href="assets/plugins/material/material.min.css">
	<link rel="stylesheet" href="assets/css/material_style.css">
	<!-- animation -->
	<link href="assets/css/pages/animate_page.css" rel="stylesheet">
	<!-- Template Styles -->
	<link href="assets/css/style.css" rel="stylesheet" type="text/css" />
	<link href="assets/css/plugins.min.css" rel="stylesheet" type="text/css" />
	<link href="assets/css/responsive.css" rel="stylesheet" type="text/css" />
	<link href="assets/css/theme-color.css" rel="stylesheet" type="text/css" />
	<!-- dropzone -->
	<link href="assets/plugins/dropzone/dropzone.css" rel="stylesheet" media="screen">
	<!-- Date Time item CSS -->
	<link rel="stylesheet" href="assets/plugins/flatpicker/flatpickr.min.css">
	<!-- favicon -->
	<link rel="shortcut icon" href="assets/img/favicon.ico" />
</head>
<!-- END HEAD -->

<body
	class="page-header-fixed sidemenu-closed-hidelogo page-content-white page-md header-white custom-sidebar-color logo-custom">
	<div class="page-wrapper">
		<!-- start header -->
		<div class="page-header navbar navbar-fixed-top">
			<div class="page-header-inner ">
				<!-- logo start -->
				<div class="page-logo">
					<a href="index.html">
						<img alt="" src="assets/img/logo.png">
				</div>
				<!-- logo end -->
				<!-- start mobile menu -->
				<a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse"
					data-target=".navbar-collapse">
					<span></span>
				</a>
				<!-- end mobile menu -->
				<!-- start header menu -->
				<div class="top-menu">
					<ul class="nav navbar-nav pull-right">
						<!-- start notification dropdown -->
						<li class="dropdown dropdown-extended dropdown-notification" id="header_notification_bar">
							<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown"
								data-close-others="true">
								<i class="fa fa-bell-o"></i>
								<span class="badge headerBadgeColor1"> {{Jumlah Notif}} </span>
							</a>
							<ul class="dropdown-menu animated swing">
								<li class="external">
									<h3><span class="bold">Notifications</span></h3>
								</li>
								<li>
									<ul class="dropdown-menu-list small-slimscroll-style" data-handle-color="#637283">
										<li>
											<a href="javascript:;">
												<span class="time">{{time notif}}</span>
												<span class="details">
													<span class="notification-icon circle deepPink-bgcolor"><i
															class="fa fa-check"></i></span> {{notif tittle}} </span>
											</a>
										</li>
									</ul>
									<div class="dropdown-menu-footer">
										<a href="javascript:void(0)"> All notifications </a>
									</div>
								</li>
							</ul>
						</li>
						<!-- end notification dropdown -->
						<!-- start manage user dropdown -->
						<li class="dropdown dropdown-user">
							<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown"
								data-close-others="true">
								<img alt="" class="img-circle " src="../../" /> <!--foto user-->
								<span id="username-div" class="username username-hide-on-mobile"></span>
								<i class="fa fa-angle-down"></i>
							</a>
							<ul class="dropdown-menu dropdown-menu-default animated jello">
								<li>
									<a href="user_profile.html">
										<i class="icon-user"></i> Profile </a>
								</li>
								<li>
									<a href="#">
										<i class="icon-settings"></i> Settings
									</a>
								</li>
								<li class="divider"> </li>
								<li>
									<a href="#" id="logout-btn">
										<i class="icon-logout"></i> Log Out 
									</a>
								</li>
							</ul>
						</li>
						<!-- end manage user dropdown -->
					</ul>
				</div>
			</div>
		</div>
		<!-- end header -->
		<!-- start page container -->
		<div class="page-container">
			<!-- start page content -->
			<div class="page-content-wrapper">
				<div class="page-content">
					<div class="page-bar">
						<div class="page-title-breadcrumb">
							<div class=" pull-left">
								<div class="page-title">Data Mitra</div>
							</div>
							<ol class="breadcrumb page-breadcrumb pull-right">
								<li><i class="fa fa-home"></i>&nbsp;<a class="parent-item"
										href="index.html">Home</a>&nbsp;<i class="fa fa-angle-right"></i>
								</li>
								<li class="active">Data Mitra</li>
							</ol>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12">
							<form>
								<div class="card-box">
									<div class="card-head">
										<header>Data Mitra</header>
										</ul>
									</div>
									<form>
										<div class="card-body row">
											<div class="col-lg-6 p-t-20">
												<div
													class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
													<input class="mdl-textfield__input" type="text" id="txtNIK">
													<label class="mdl-textfield__label">NIK</label>
												</div>
											</div>
											<div class="col-lg-6 p-t-20">
												<div
													class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
													<input class="mdl-textfield__input" type="text" id="txtFirstName">
													<label class="mdl-textfield__label">Nama Depan</label>
												</div>
											</div>
											<div class="col-lg-6 p-t-20">
												<div
													class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
													<input class="mdl-textfield__input" type="text" id="txtLasttName">
													<label class="mdl-textfield__label">Nama Belakang</label>
												</div>
											</div>
											<div class="col-lg-6 p-t-20">
												<div
													class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
													<input class="mdl-textfield__input" type="text" id="txtJabatan">
													<label class="mdl-textfield__label">Jabatan</label>
												</div>
											</div>
											<div class="col-lg-6 p-t-20">
												<div
													class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height txt-full-width">
													<input class="mdl-textfield__input" type="text" id="sample2" value=""
														onchange="handleChooseSex(event)"
														readonly tabIndex="-1">
													<label for="sample2" class="pull-right margin-0">
														<i class="mdl-icon-toggle__label material-icons">keyboard_arrow_down</i>
													</label>
													<label for="sample2" class="mdl-textfield__label">Jenis Kelamin</label>
													<ul data-mdl-for="sample2"
														class="mdl-menu mdl-menu--bottom-left mdl-js-menu">
														<li class="mdl-menu__item" data-val="DE">Pria</li>
														<li class="mdl-menu__item" data-val="BY">Wanita</li>
													</ul>
												</div>
											</div>
											<div class="col-lg-6 p-t-20">
												<div
													class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
													<input class="mdl-textfield__input" type="text"
														pattern="-?[0-9]*(\.[0-9]+)?" id="text5">
													<label class="mdl-textfield__label" for="text5">Nomor Handphone</label>
													<span class="mdl-textfield__error">Nomor harus dimasukan!</span>
												</div>
											</div>
											<div class="col-lg-6 p-t-20">
												<div
													class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
													<input class="mdl-textfield__input" type="email" id="txtemail">
													<label class="mdl-textfield__label">Email</label>
													<span class="mdl-textfield__error">Masukan Email dengan benar!</span>
												</div>
											</div>
											<div class="col-lg-6 p-t-20">
												<div
													class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
													<input class="mdl-textfield__input" type="text" id="txtdomisili">
													<label class="mdl-textfield__label">Alamat Domisili</label>
												</div>
											</div>
											<div class="col-lg-6 p-t-20">
												<div
													class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
													<input class="mdl-textfield__input" type="text" id="txtusaha">
													<label class="mdl-textfield__label">Nama Usaha</label>
													<span class="mdl-textfield__error">Wajib!</span>
												</div>
											</div>
											<div class="col-lg-6 p-t-20">
												<div
													class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
													<input class="mdl-textfield__input" type="text" id="txtalamatusaha">
													<label class="mdl-textfield__label">Alamat Usaha</label>
												</div>
											</div>
											<div class="col-lg-6 p-t-20">
												<!-- <div
													class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height txt-full-width">
													<input class="mdl-textfield__input" id="bidang-usaha-dropdown" readonly
														tabIndex="-1">
													<label for="bidang-usaha-dropdown" class="pull-right margin-0">
														<i class="mdl-icon-toggle__label material-icons">keyboard_arrow_down</i>
													</label>
													<label for="bidang-usaha-dropdown" class="mdl-textfield__label">Bidang Usaha</label>
													<ul id="service-type-list" data-mdl-for="bidang-usaha-dropdown" class="mdl-menu mdl-menu--bottom-left mdl-js-menu">
													</ul>
												</div> -->
												<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
													<select class="mdl-textfield__input" id="bidang-usaha-dropdown" name="bidang-usaha">
														<!-- <option value="85">85</option>
														<option value="87">87</option>
														<option value="89">89</option>
														<option value="91">91</option>
														<option value="diesel">Diesel</option> -->
													</select>
													<label class="mdl-textfield__label" for="octane">Bidang Usaha</label>
												</div>
											</div>
											
											<div class="col-lg-12 p-t-20">
												<div class="mdl-textfield mdl-js-textfield txt-full-width">
													<textarea class="mdl-textfield__input" rows="4" id="txtbusinessdesc"></textarea>
													<label class="mdl-textfield__label" for="text7">Deskripsi Perusahaan</label>
												</div>
											</div>
											<!-- <div class="col-lg-12 p-t-20 text-center">
												<button type="submit"
													id="datamitra-submit"
													class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect m-b-10 m-r-20 btn-pink">Submit</button>
												<button type="button"
													class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect m-b-10 btn-default">Cancel</button>
											</div> -->
										</div>
									</form>
									<div class="row">
										<div class="col-sm-12"> 
											<div class="col-lg-12 p-t-20">
												<label class="control-label col-md-3">Upload Foto KTP dan Selfie+KTP</label>
												<!-- <form id="id_dropzone" class="dropzone">
													<div class="dz-message">
														<div class="dropIcon">
															<i class="material-icons">cloud_upload</i>
														</div>
														<h3>Seret gambar ke sini atau klik untuk mengunggah.</h3>
													</div>
												</form> -->
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-sm-12">
											<div class="col-lg-6 p-t-20">
												<div>
													<input id="ktp-upload-btn" type="file" />
												</div>
												<div class="py-3 px-5" id="drop_zone" ondrop="dropHandler(event)" ondragleave="dragLeaveHandler(event)" ondragover="dragOverHandler(event)">
													<div>
														Seret gambar ke sini atau klik untuk mengunggah...
													</div>
												</div>	
											</div>
											<div class="col-lg-6 p-t-20">
												<button id="clear-img-btn" class="btn btn-secondary">Clear</button>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-sm-12">
											<div class="col-lg-6 p-t-20">
												<img id="ktp-img" style="width:100%" />
											</div>
										</div>
									</div>
									<!-- <div class="row">
										<form class="dropzone" action="" method="post" enctype="multipart/form-data">
											<input type="file" name="file" />
										</form>
									</div> -->
									<div class="row">
										<div class="col-sm-12">
											<!-- <div class="card-box"> -->
												<div class="card-head">
													<header>Data Rekening Bank</header>
													</ul>
												</div>
												<div class="card-body row">
													<div class="col-lg-6 p-t-20">
														<div
															class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
															<input class="mdl-textfield__input" type="text" id="txtBank">
															<label class="mdl-textfield__label">Bank</label>
														</div>
													</div>
													<div class="col-lg-6 p-t-20">
														<div
															class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
															<input class="mdl-textfield__input" type="text" id="txtNoRek">
															<label class="mdl-textfield__label">Nomor Rekening</label>
														</div>
													</div>
													<div class="col-lg-6 p-t-20">
														<div
															class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
															<input class="mdl-textfield__input" type="text" id="txtAtasNama">
															<label class="mdl-textfield__label">Atas Nama</label>
														</div>
													</div>
													<!-- <div class="col-lg-12 p-t-20 text-center">
														<button type="button"
															class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect m-b-10 m-r-20 btn-pink">Submit</button>
														<button type="button"
															class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect m-b-10 btn-default">Cancel</button>
													</div> -->
												</div>
											<!-- </div> -->
										</div>
									</div>
									<div class="col-lg-12 p-t-20 text-center">
										<button 
											type="submit"
											id="datamitra-submit"
											class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect m-b-10 m-r-20 btn-pink"
										>
											Submit
										</button>
										<button type="button"
											class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect m-b-10 btn-default">Cancel</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
			<!-- end page content -->
		</div>
		<!-- end page container -->
		<!-- start footer -->
		<div class="page-footer">
			<div class="page-footer-inner"> 2020 &copy;
				<a href="https://mybiiz.com" target="_top" class="makerCss">MyBiiz</a>
			</div>
			<div class="scroll-to-top">
				<i class="icon-arrow-up"></i>
			</div>
		</div>
		<!-- end footer -->
	</div>
	<!-- start js include path -->
	<script src="assets/plugins/jquery/jquery.min.js"></script>
	<script src="assets/plugins/popper/popper.min.js"></script>
	<script src="assets/plugins/jquery-blockui/jquery.blockui.min.js"></script>
	<script src="assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<!-- bootstrap -->
	<script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
	<!-- Common js-->
	<script src="assets/js/app.js"></script>
	<script src="assets/js/layout.js"></script>
	<script src="assets/js/theme-color.js"></script>
	<!-- Material -->
	<script src="assets/plugins/material/material.min.js"></script>
	<script src="assets/js/pages/material_select/getmdl-select.js"></script>
	<!-- dropzone -->
	<script src="assets/plugins/dropzone/dropzone.js"></script>
	<script src="assets/plugins/dropzone/dropzone-call.js"></script>
	<!-- date and time 	 -->
	<script src="assets/plugins/flatpicker/flatpickr.min.js"></script>
	<script src="assets/js/pages/datetime/datetime-data.js"></script>
	<!-- animation -->
	<script src="assets/js/pages/ui/animations.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/jwt-decode@2.2.0/build/jwt-decode.min.js"></script>
	<!-- end js include path -->
	<script>
		let megabytesLimit = 2 * 1024 * 1024
		let ktpImageBas64 = ''
		let userInfo = null
		let serviceTypes = []
		let serviceTypeId = 0
		let sex = null

		document.addEventListener('drop', e => {
			e.preventDefault()
		})

		document.querySelector('#logout-btn').addEventListener('click', e => {
			localStorage.removeItem("apiKey")
			window.location = '/'
		})

		document.querySelector('#username-div').innerHTML = `
			<div class="spinner-border spinner-border-sm" role="status">
				<span class="sr-only">Loading...</span>
			</div>
		`
		
		const checkAndAddFile = (file) => {
			if (file.size > megabytesLimit) {
				alert(`Ukuran file melebihi batas! Max: 2MB, file yg diupload: ${Math.round(file.size/1024/1024)}MB`)
				document.querySelector('#drop_zone').style.backgroundColor = 'white'
			} else {
				const reader = new FileReader()
				reader.readAsDataURL(file)
				reader.onload = () => {
					const ktpResult = reader.result
					console.log(ktpResult)
					ktpImageBas64 = ktpResult
					document.querySelector('#drop_zone').style.backgroundColor = 'white'
					document.querySelector('#ktp-img').src = ktpResult
				}
				reader.onerror = () => {
					document.querySelector('#drop_zone').style.backgroundColor = 'white'
				}
			}
		}

		document.querySelector('#ktp-upload-btn').addEventListener('change', e => {
			e.preventDefault()
			checkAndAddFile(e.target.files[0])
		})

		document.querySelector('#clear-img-btn').addEventListener('click', e => {
			e.preventDefault()
			ktpImageBas64 = ''
			document.querySelector('#ktp-img').src = ''
		})

		const handleChooseSex = e => {
			console.log('chosen:', e.target.value)
			sex = e.target.value
		}

		const fetchUser = async () => {
			try {
				const apiUrlResponse = await fetch(`/api_url.txt`)
				const apiUrl = await apiUrlResponse.text()
				const apiKey = localStorage.getItem('apiKey')
				const id = jwt_decode(apiKey).id
 				const userInfoResponse = await fetch(`${apiUrl}/users/${id}`, {
					headers: { 
						authorization: apiKey,
					}
				}) 
				if (userInfoResponse.status !== 200) throw await response.text()
				userInfo = await userInfoResponse.json()
				console.log(userInfo)

				document.querySelector('#username-div').innerText = userInfo.name
			} catch (e) {
				console.error(e);
				document.querySelector('#username-div').innerHTML = ``
			}
		}

		const fetchServiceTypes= async () => {
			try {
				const apiUrlResponse = await fetch(`/api_url.txt`)
				const apiUrl = await apiUrlResponse.text()
				const apiKey = localStorage.getItem('apiKey')
				const id = jwt_decode(apiKey).id
 				const serviceTypesResponse = await fetch(`${apiUrl}/servicetypes`, {
					headers: { 
						authorization: apiKey,
					}
				}) 
				if (serviceTypesResponse.status !== 200) throw await response.text()
				serviceTypes = await serviceTypesResponse.json()
				console.log('service types:', serviceTypes)

				const serviceTypesMapped = serviceTypes.map(serviceType => `
<<<<<<< Updated upstream
					<option value="${serviceType.id}">${serviceType.name}</option>					
				`).join('')

				// <li onclick="selectServiceType(${serviceType.id})" class="mdl-menu__item" data-val="${serviceType.id}">${serviceType.name}</li>

				document.querySelector(`#bidang-usaha-dropdown`).innerHTML = serviceTypesMapped
=======
					<option id="${serviceType.id}" value="${serviceType.name}">${serviceType.name}</option>					
				`).join('')

				// <li onclick="selectServiceType(${serviceType.id})" class="mdl-menu__item" data-val="${serviceType.id}">${serviceType.name}</li>
				
				serviceTypeDropdown.innerHTML = '<option value=""></option>' + serviceTypesMapped;
>>>>>>> Stashed changes
			} catch (e) {
				console.error(e)
			}
		}

<<<<<<< Updated upstream
    document.querySelector('#bidang-usaha-dropdown').addEventListener('change', e => {
      serviceTypeId = parseInt(e.target.value)
    })

		const selectServiceType = (id) => {
			const foundServiceType = serviceTypes.find(serviceType => serviceType.id === id)
			serviceTypeId = id
			console.log('selected:', id, foundServiceType)
			// document.querySelector('#bidang-usaha-dropdown').value = foundServiceType.name
		}
=======
		// When Select is on change, it set serviceTypeId to selectedIndex
		serviceTypeDropdown.addEventListener('change', (e) => {
			console.log('harusnya ada')
			serviceTypeId = e.target.selectedIndex;
		})
>>>>>>> Stashed changes

		fetchUser()
		fetchServiceTypes()
		
		document.querySelector('#datamitra-submit').addEventListener('click', async e => {
			e.preventDefault()
			
			const nik = document.querySelector('#txtNIK').value
			const firstName = document.querySelector('#txtFirstName').value
			const lastName = document.querySelector('#txtLasttName').value
			const jabatan = document.querySelector('#txtJabatan').value
			const phone = document.querySelector('#text5').value
			const email = document.querySelector('#txtemail').value
			const domisili = document.querySelector('#txtdomisili').value
			const usaha = document.querySelector('#txtusaha').value
			const alamatUsaha = document.querySelector('#txtalamatusaha').value
			const businessDesc = document.querySelector('#txtbusinessdesc').value
			const bank = document.querySelector('#txtBank').value
			const noRek = document.querySelector('#txtNoRek').value
			const atasNama = document.querySelector('#txtAtasNama').value
			// const dropzoneId = document.querySelector('#id_dropzone').innerHTML

      console.log('service type:', serviceTypeId)

			// Validation
			if (nik === '' || nik.length !== 16)
				alert('Harap isi NIK dengan benar! Panjang NIK harus 16 digit.')
			else if (firstName === '')
				alert('Harap isi nama depan dengan benar!')
			else if (lastName === '')
				alert('Harap isi nama belakang dengan benar!')
			else if (jabatan === '')
				alert('Harap isi jabatan dengan benar!')
			else if (phone === '')
				alert('Harap isi nomor telepon dengan benar!')
			else if (domisili === '')
				alert('Harap isi domisili dengan benar!')
			else if (usaha === '')
				alert('Harap isi nama usaha dengan benar!')
			else if (alamatUsaha === '')
				alert('Harap isi alamat usaha dengan benar!')
			else if (businessDesc === '')
				alert('Harap isi deskripsi bisnis dengan benar!')
			else if (bank === '')
				alert('Harap isi bank dengan benar!')
			else if (noRek === '')
				alert('Harap isi nomor rekening dengan benar!')
			else if (atasNama === '')
				alert('Harap isi atas nama dengan benar!')
			else if (serviceTypeId === 0)
				alert('Harap isi bidang bisnis dengan benar!')
			else if (ktpImageBas64 === '')
				alert('Harap upload KTP yang valid!')
			else if (sex === null)
				alert('Harap isi jenis kelamin dengan benar!')
			else {
				const partnerData = {
					partner: {
						familyIdNumber: nik,
						firstName: firstName,
						lastName: lastName,
						name: usaha,
						phone: phone,
						alamatUsaha: alamatUsaha,
						business: {
							name: usaha,
							address: alamatUsaha,
							description: businessDesc,
							serviceType: null,
							serviceTypeId: serviceTypeId,
						},
						businessId: 0,
						city: domisili,
						position: jabatan,
						sex: sex,
						bankName: bank,
						bank: null,
						bankId: 0,
						bankAccountId: noRek,
						bankHolderName: atasNama,
						email: email,
						// domisili: domisili,
						// serviceType: null,
						// serviceTypeId: 0,
						lat: 0,
						lon: 0,
						user: null,
						userId: userInfo.id,
					},
					citizenIdPhoto: ktpImageBas64 
				}

				try {
					const apiUrlResponse = await fetch(`/api_url.txt`)
					const apiUrl = await apiUrlResponse.text()
					const response = await fetch(`${apiUrl}/partnersregister`, {
						method: 'post',
						headers: { authorization: localStorage.getItem('apiKey') },
						body: JSON.stringify(partnerData)
					})
					if (response.status !== 200) throw await response.text()
					window.location = '/'
				} catch (e) {
					console.error(e)
				}

				console.log(partnerData)
			}
		})

		const dropHandler = e => {
			e.preventDefault()
			checkAndAddFile(e.dataTransfer.files[0])
		}

		const dragLeaveHandler = e => {
			e.preventDefault()
			const myDropzone = document.querySelector('#drop_zone').style.backgroundColor = 'white'
		}

		const dragOverHandler = e => {
			e.preventDefault()
		
			const myDropzone = document.querySelector('#drop_zone')
			console.log('Dragging over', myDropzone)
			myDropzone.style.backgroundColor = 'lightgray'
		}
	</script>
</body>

</html>
